<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Outline</title>
    <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
    <!--<script src="../js/outline.js"></script>-->
    <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <!-- 可选的Bootstrap主题文件（一般不用引入） -->
    <!--<link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">-->
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/themes/default/style.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/jstree.min.js"></script>
    <link rel="stylesheet" href="../css/outline.css">
    <link rel="stylesheet" href="../css/wiki_navigator.css">
    <script src="../js/wiki_utils.js"></script>
    <script src="../js/verificationLogin.js"></script>

</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top" style="background-color: #ffffff;margin: 0">
    <div class="container-fluid">
        <a class="navbar-header" href="../html/Outline.html" style="margin-top: 10px;">
            <img  src="../resource/icon/tss_logo@2x.png" alt="" style="height: 32px">
        </a>
        <!--<div class="navbar-header navbar-right" style=";margin-top: 10px;">-->
            <!--<div id="about_btn" class="" style="" onclick="location='../html/about.html'">About</div>-->
            <!--<div id="help_btn" class="" style="" onclick="location='../html/help.html'">Help</div>-->
        <!--</div>-->
        <ul class="nav navbar-nav">
            <!--<li class="active"><a href="#">Link <span class="sr-only">(current)</span></a></li>-->
            <li class="dropdown">
                <ul class="dropdown-menu">
                    <li><a href="../html/Outline.html" onclick="">管理大纲(管理员)</a></li>
                    <li><a href="../html/create_Entry.html">增加条目(管理员)</a></li>
                    <li role="separator" class="divider"></li>
                    <li><a href="#">请求增加条目(敬请期待)</a></li>
                    <li><a href="../html/administrator_page.html">管理控制台</a></li>
                </ul>
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">选项<span class="caret"></span></a>
            </li>
            <li id="login_button"></li>

        </ul>

        <ul class="nav navbar-nav" style="float: right">
            <li class="dropdown" id="welcome_user">
                <ul class="dropdown-menu">
                    <li><a href="" onclick="clearLogin();">退出登录</a></li>
                    <li><a href="../html/changeRecord.html">我的修改记录</a> </li>
                </ul>
                <a href="#" id="welcome_tip" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></a>
            </li>
        </ul>


        <!--<div class="welcome" id="welcome_tip" style="float: right"></div>-->

    </div>
</nav>

<!--正经内容的分割线-->
    <div class="container-fluid" style="">
        <!--<div class="row">-->
            <!--<div class="col-sm-6">-->
            <!--<form id="s">-->
                <!--<input type="search" id="q" style="border: solid 1px #d3dad8;outline: none" placeholder="大纲查询"/>-->
                <!--<button type="submit" class="btn btn-primary">Search</button>-->
            <!--</form>-->
            <!--</div>-->
            <!--<div class="col-sm-6">-->
                <!--<input type="text" id="entry_search" placeholder="条目查询" >-->
                <!--<button class="btn btn-primary" onclick=search_entry(document.getElementById('entry_search').value);>Search</button>-->
            <!--</div>-->
        <!--</div>-->


        <div id="outline_article" class="row" style="">
            <div id="moutline" class="col-sm-3"></div>
            <div id="article_board" class="col-sm-9" style="padding-left: 30px;padding-right: 30px;">
                <div id="search_bar">
                    <div id="search_module" class="input-group">
                        <input id="search_input" type="text" class="form-control" placeholder="Search for...">
                            <span class="input-group-btn">
                                <button id="search_btn" class="btn btn-primary" type="button">Search</button>
                            </span>
                        <!--<input type="text" id="search_input">-->
                        <!--<button id="search_btn">search</button>-->
                    </div>
                </div>


                <div id="search_result_content" class="tab-content">
                    <!--<div class="tab-pane active" id="article_content"></div>-->

                </div>

                <div id="nav_part">

                </div>

                <div id="navigator_part"></div>
            </div>
        </div>
    </div>

<button onclick=save_outline()>save</button>
<button onclick=save_outline_and_entry()>获取大纲数据测试</button>
<button onclick=show_all_buffer()>缓存数据测试</button>
<!--<button onclick=save_outline_and_entry();>select</button>-->
<!--<button onclick=get_test();>get test</button>-->
</body>
<script src="../js/outline.js"></script>
</html>
<script>
    $(document).ready(function () {
        load_empty_tip();
        init_outline_page();
        $('#moutline').on("changed.jstree",function (e,data) {
//            alert("the object:"+JSON.stringify(data.instance));
            var selected_name = data.instance.get_node(data.selected[0]).text;
//            alert("here are data:"+ selected_name);
            display_outline_content(selected_name);
        });
        load_all_outline_content();
    });
function get_test() {
   $.ajax({
       url:'/outline/getTest',
       success:function (data) {
           alert(JSON.stringify(data));
       },
       error:function(data){
           alert('error')
       }
   });
}

</script>

<script>
    get_welcome();

</script>